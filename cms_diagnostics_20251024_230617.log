Czas: piÄ…, 24 paÅº 2025, 23:06:17 CEST
=========================================

## ğŸ§© Informacje systemowe
Linux dell 6.1.0-40-amd64 #1 SMP PREEMPT_DYNAMIC Debian 6.1.153-1 (2025-09-20) x86_64 GNU/Linux
Distributor ID:	Debian
Description:	Debian GNU/Linux 12 (bookworm)
Release:	12
Codename:	bookworm

## ğŸ“¦ Docker i kontenery
NAMES                    STATUS                 PORTS
tjw_nginx                Up 2 hours             80/tcp
tjw_php                  Up 2 hours             9000/tcp
traefik                  Up 2 hours             0.0.0.0:80->80/tcp, [::]:80->80/tcp, 0.0.0.0:443->443/tcp, [::]:443->443/tcp, 0.0.0.0:8080->8080/tcp, [::]:8080->8080/tcp
webmajster-portal-1      Up 2 hours             3000/tcp
webmajster-generator-1   Up 2 hours             8081/tcp
webmajster-agent-1       Up 2 hours             8085/tcp
lab_nginx                Up 2 hours             80/tcp
lab_php                  Up 2 hours             9000/tcp
nc_app                   Up 2 hours             80/tcp
nc_cron                  Up 2 hours             
nc_db                    Up 2 hours (healthy)   
nc_redis                 Up 2 hours (healthy)   

## âš™ï¸ PHP w kontenerze (tjw_php)
PHP 8.3.26 (cli) (built: Oct  8 2025 22:48:31) (NTS)
Copyright (c) The PHP Group
Zend Engine v4.3.26, Copyright (c) Zend Technologies
    with Zend OPcache v8.3.26, Copyright (c), by Zend Technologies
curl
mbstring
pdo_sqlite
sqlite3

## ğŸ“‚ Struktura katalogÃ³w aplikacji
/var/www/tatajestwazny/app
â”œâ”€â”€ add_auth_include.sh
â”œâ”€â”€ admin_password_report.log
â”œâ”€â”€ analyze_admin_auth.sh
â”œâ”€â”€ analyze_auth.php
â”œâ”€â”€ auth_analysis.log
â”œâ”€â”€ config
â”‚Â Â  â”œâ”€â”€ config.php
â”‚Â Â  â”œâ”€â”€ nginx
â”‚Â Â  â”‚Â Â  â””â”€â”€ tatajestwazny.local
â”‚Â Â  â””â”€â”€ nginx.conf
â”œâ”€â”€ cookies.txt
â”œâ”€â”€ db
â”‚Â Â  â”œâ”€â”€ init.sql
â”‚Â Â  â””â”€â”€ tjw.sqlite
â”œâ”€â”€ debug_password_hash.sh
â”œâ”€â”€ deploy_admin_integration.sh
â”œâ”€â”€ deploy_admin_panel.sh
â”œâ”€â”€ deploy_admin_password_reset.sh
â”œâ”€â”€ deploy_auth_and_blog_security.sh
â”œâ”€â”€ deploy_auth_module.sh
â”œâ”€â”€ deploy_blog_admin.sh
â”œâ”€â”€ deploy_blog_module.sh
â”œâ”€â”€ deploy_layout_module.sh
â”œâ”€â”€ deploy_menu_module.sh
â”œâ”€â”€ deploy_pages_module.sh
â”œâ”€â”€ diagnose_admin_integrity.sh
â”œâ”€â”€ diagnose_admin_php.sh
â”œâ”€â”€ diagnose_cms.sh
â”œâ”€â”€ diagnose_tjw.sh
â”œâ”€â”€ explain_and_set_admin_password.sh
â”œâ”€â”€ fix_admin_blog_layout.sh
â”œâ”€â”€ fix_auth_php.sh
â”œâ”€â”€ fix_require_once.sh
â”œâ”€â”€ fix_requires.sh
â”œâ”€â”€ full_auth_debug.sh
â”œâ”€â”€ includes
â”‚Â Â  â”œâ”€â”€ auth.php
â”‚Â Â  â”œâ”€â”€ footer.php
â”‚Â Â  â”œâ”€â”€ header.php
â”‚Â Â  â”œâ”€â”€ layout.php
â”‚Â Â  â””â”€â”€ load_env.php
â”œâ”€â”€ init_tjw.sh
â”œâ”€â”€ public
â”‚Â Â  â”œâ”€â”€ admin
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ auth.php
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ index.php
â”‚Â Â  â”‚Â Â  â””â”€â”€ reset_password.php
â”‚Â Â  â”œâ”€â”€ apply_marzena_copy.sh
â”‚Â Â  â”œâ”€â”€ auth.php
â”‚Â Â  â”œâ”€â”€ deploy_tjw.sh
â”‚Â Â  â”œâ”€â”€ icons
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ icon-192.png
â”‚Â Â  â”‚Â Â  â””â”€â”€ icon-512.png
â”‚Â Â  â”œâ”€â”€ includes
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ footer.php
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ header.php
â”‚Â Â  â”‚Â Â  â””â”€â”€ layout.php
â”‚Â Â  â”œâ”€â”€ index.php
â”‚Â Â  â”œâ”€â”€ main.js
â”‚Â Â  â”œâ”€â”€ manifest.webmanifest
â”‚Â Â  â”œâ”€â”€ offline.php
â”‚Â Â  â”œâ”€â”€ sections
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ blog.php
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ home.php
â”‚Â Â  â”‚Â Â  â””â”€â”€ kontakt.php
â”‚Â Â  â”œâ”€â”€ style.css
â”‚Â Â  â”œâ”€â”€ styles.css
â”‚Â Â  â””â”€â”€ sw.js
â”œâ”€â”€ README.md
â”œâ”€â”€ reset_admin_password.sh
â”œâ”€â”€ setup_tjw.sh
â”œâ”€â”€ src
â”‚Â Â  â”œâ”€â”€ AdminHandlers.php
â”‚Â Â  â”œâ”€â”€ Blocks.php
â”‚Â Â  â”œâ”€â”€ bootstrap.php
â”‚Â Â  â”œâ”€â”€ Db.php
â”‚Â Â  â”œâ”€â”€ helpers.php
â”‚Â Â  â”œâ”€â”€ Repositories
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ MenuRepository.php
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ PagesRepository.php
â”‚Â Â  â”‚Â Â  â””â”€â”€ PostsRepository.php
â”‚Â Â  â””â”€â”€ Stats.php
â”œâ”€â”€ templates
â”‚Â Â  â”œâ”€â”€ 404.php
â”‚Â Â  â”œâ”€â”€ admin_block_form.php
â”‚Â Â  â”œâ”€â”€ admin_blocks_list.php
â”‚Â Â  â”œâ”€â”€ admin_dashboard.php
â”‚Â Â  â”œâ”€â”€ admin_layout.php
â”‚Â Â  â”œâ”€â”€ admin_menu_form.php
â”‚Â Â  â”œâ”€â”€ admin_menu_list.php
â”‚Â Â  â”œâ”€â”€ admin_pages_form.php
â”‚Â Â  â”œâ”€â”€ admin_pages_list.php
â”‚Â Â  â”œâ”€â”€ admin_posts_form.php
â”‚Â Â  â”œâ”€â”€ admin_posts_list.php
â”‚Â Â  â”œâ”€â”€ admin_settings.php
â”‚Â Â  â”œâ”€â”€ blog_list.php
â”‚Â Â  â”œâ”€â”€ blog_post.php
â”‚Â Â  â”œâ”€â”€ home.php
â”‚Â Â  â”œâ”€â”€ layout.php
â”‚Â Â  â””â”€â”€ page.php
â”œâ”€â”€ test_admin_panel.sh
â”œâ”€â”€ test_auth_env.sh
â”œâ”€â”€ test_cookies.txt
â”œâ”€â”€ verify_admin_auth_runtime.log
â””â”€â”€ verify_admin_auth_runtime.sh

13 directories, 93 files

## ğŸ”‘ Uprawnienia plikÃ³w kluczowych
-rw-r--r-- 1 root  root  3455 10-24 00:06 /var/www/tatajestwazny/app/includes/auth.php
-rw-r--r-- 1 root  root  6902 10-23 23:52 /var/www/tatajestwazny/app/public/admin/index.php
-rw-r--r-- 1 root  root  4280 10-24 00:12 /var/www/tatajestwazny/app/src/AdminHandlers.php
-rwxrwxrwx 1 roman roman 1975 10-23 15:22 /var/www/tatajestwazny/app/src/Blocks.php
-rwxrwxrwx 1 roman roman  868 10-23 22:50 /var/www/tatajestwazny/app/src/bootstrap.php
-rwxrwxrwx 1 roman roman  606 10-23 15:22 /var/www/tatajestwazny/app/src/Db.php
-rw-r--r-- 1 root  root  5408 10-23 23:44 /var/www/tatajestwazny/app/src/helpers.php
-rw-r--r-- 1 root  root   680 10-23 18:47 /var/www/tatajestwazny/app/src/Stats.php

## ğŸ”§ ZawartoÅ›Ä‡ .env (bez haseÅ‚)
Brak pliku .env

## ğŸ—ƒï¸ Baza danych SQLite
-rwxrwxrwx 1 www-data www-data 56K 10-23 17:27 /var/www/tatajestwazny/app/db/tjw.sqlite
content_blocks
sqlite_sequence
nav_items
_health
pages
menu_items
posts
test

PrzykÅ‚adowe kolumny z tabel 'pages' i 'blocks':
0|id|INTEGER|0||1
1|slug|TEXT|1||0
2|title|TEXT|1||0
3|body_html|TEXT|1||0
4|created_at|TEXT|1|CURRENT_TIMESTAMP|0
5|updated_at|TEXT|1|CURRENT_TIMESTAMP|0

## ğŸ§ª Test poÅ‚Ä…czenia PDO w kontenerze PHP
PDO SQLite: OK
Tabele: content_blocks, sqlite_sequence, nav_items, _health, pages, menu_items, posts, test

## ğŸ“œ Wykryte funkcje obsÅ‚ugi POST
/var/www/tatajestwazny/app/src/AdminHandlers.php:    function handleBlocksPost($action, $blocksRepository = null)
/var/www/tatajestwazny/app/src/AdminHandlers.php:    function handlePagesPost($action, $pagesRepository = null)
/var/www/tatajestwazny/app/src/AdminHandlers.php:    function handleMenuPost($action, $menuRepository = null)
/var/www/tatajestwazny/app/src/AdminHandlers.php:    function handleBlogPost($action, $postsRepository = null)
/var/www/tatajestwazny/app/src/AdminHandlers.php:    function handleSettingsPost($action)

## ğŸ§  ZaleÅ¼noÅ›ci w includes/
require __DIR__ . '/../../src/bootstrap.php';
require_once __DIR__ . '/../../includes/auth.php';
require_once __DIR__ . '/../../includes/load_env.php';
    require_post_csrf();

## âš ï¸ Ostatnie bÅ‚Ä™dy PHP (z kontenera)
